@model IEnumerable<Models.Autores>
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

<div>
    <h1>En esta lista estan todos los autores del archivo</h1>
    <br>
    <ul>
        @foreach (var Autor in @Model)
        {
            <li>@Autor.Name</li>
        }
    </ul>
</div>
<br />
<br />
<div>
    <h2>Digite el Nombre Completo del Autor que desea buscar:</h2>
    <div style="display: grid;">
        <input type="text" id="name" value="" style="grid-column: 1"/>
        <button onclick="searchAutor()" style="grid-column: 3">Buscar Nombre</button>
    </div>
</div>

<div id="tabla"></div>

@section Scripts {
    <script>
        function searchAutor() {
            var name = document.getElementById('name').value;

            if (!name) {
                name = " "
                return;
            }

            fetch('@Url.Action("AutorSearch")?name=' + encodeURIComponent(name))
            .then(response => response.text())
            .then(html => {
                document.getElementById('tabla').innerHTML = html;
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error al buscar');
            });
        }
    </script>
}